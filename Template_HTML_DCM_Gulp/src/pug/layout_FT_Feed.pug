doctype html
html.no-js(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    block title
    meta(name="viewport", content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no')
    block metaSize
    link(rel='stylesheet',href='css/styles.css')
    script(src="https://cdn.flashtalking.com/frameworks/js/jquery/jquery-3.3.1.min.js")
    script(src="https://cdn.flashtalking.com/frameworks/js/gsap/3.1.1/gsap.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.0/CSSRulePlugin.min.js")
    script(src='webfont.js', async='')
    script(src="js/main.js")
  body.loading
    .preloader
      div
      div
    block content
    script(src="https://cdn.flashtalking.com/frameworks/js/api/2/10/html5API.js")
    script(src="https://cdn.flashtalking.com/feeds/frameworks/js/api/20/FTFeed.min.js")
    script(src="https://cdn.flashtalking.com/feeds/frameworks/js/utils/Tracker.js")

    script(type='text/javascript').
      function fontPreloader() {
      WebFont.load({
      custom: {
      families: ['ATTAleckSans_W_Rg']
      },
      active: function() {
      App_banner.getInstance().init();
      },
      inactive: function() {
      App_banner.getInstance().init();
      },
      })
      }
    script(type='text/javascript').
      myFT.on("instantads", function () {
      let productId = "";
      let creativeType = myFT.instantAds.creativeType;
      // Setup new Flashtalking Feed
      let ftFeed = new FTFeed(myFT);
      // Load the feed and designate callback functions for both feed success and feed failure
      ftFeed.getFeed(feedSuccess, feedError);
      // Feed successfully loaded, setup content
      function feedSuccess(feed) {
      Tracker.impressionTrackEvent("Feed: " + feed[0].powerfeeds_id);
      productId = feed[0].powerfeeds_id;
      myFT.instantAds.phone_img = feed[0].powerfeeds_image;
      myFT.instantAds.dynamicURL = feed[0].producturl;
      if (creativeType == "product") {
      myFT.instantAds.BlueTitle = feed[0].powerfeeds_name;
      }
      fontPreloader();
      }
      function feedError(errorMsg, feedUrl) {
      if (creativeType == "generic") {
      Tracker.impressionTrackEvent("Version: Generic");
      productId = "generic";
      } else if (creativeType == "cart_abandoner") {
      Tracker.impressionTrackEvent("Version: Cart Abandoner");
      productId = "cart_abandoner"
      } else if (creativeType == "product") {
      Tracker.impressionTrackEvent("Version: Product Page");
      productId = "product";
      } else {
      Tracker.impressionTrackEvent("Error");
      productid = "error";
      }
      fontPreloader();
      }
      document.getElementById('main').addEventListener('click', function () {
      myFT.clickTag(1, myFT.instantAds.dynamicURL); //dynamic clicktag code
      });
      fontPreloader();
      });
